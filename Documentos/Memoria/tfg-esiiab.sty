%%
%% This file `tfg-esiiab.sty`
%%
%%

\NeedsTeXFormat{LaTeX2e}

\usepackage{epsfig}
\usepackage[spanish,activeacute]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{tabularx} % Permite definir el ancho de la fila en el entorno tabular

\usepackage[ 
  plainpages = false, pdfpagelabels,
  bookmarks,
  bookmarksopen = true,
  bookmarksnumbered = true,
  linktocpage,
  pagebackref,
  colorlinks = true,
  linkcolor = blue,
  urlcolor  = blue,
  citecolor = blue,
  anchorcolor = green,
  hyperindex = true,
  hyperfigures
  ]{hyperref}
\usepackage{hyperref}
\usepackage[square, sort, numbers, authoryear]{natbib}


%Para los márgenes y sangrados
\usepackage{geometry}
\geometry{a4paper, left=3.5cm, right=2cm, top=2.5cm, bottom=2.5cm, headsep=1.5cm} %Para margen izquierdo, derecho, inferior y superior.

\def\supervisor #1{\def\argSuper {#1}}
\def\cosupervisor #1{\def\argCosuper {#1}}


\renewcommand{\baselinestretch}{1.25} % Interlineado 1.25


%% Redefino la presentación de la fecha
\newcommand{\fecha}{\ifcase\month\or
  Enero\or Febrero\or Marzo\or Abril\or Mayo\or Junio\or
  Julio\or Agosto\or Septiembre\or Octubre\or Noviembre\or
  Diciembre\fi \space de \number\year}

%% Redefino la portada del documento
\renewcommand{\maketitle}{\begin{titlepage}%
  \let\footnotesize\small
  \let\footnoterule\relax
  \let \footnote \thanks
  
  \newgeometry{top=1cm,right=2cm} % Adapto el tamaño de esta página únicamente

  \epsfig{file=logo-uclm.eps,width=3cm}
  \hfill
  \epsfig{file=logo-esii.eps,width=3cm}
  \begin{center}%  
    \epsfig{file=logo-conciti.eps,width=3cm}
    \vskip 2em
    \textbf{\large UNIVERSIDAD DE CASTILLA-LA MANCHA}
    \vskip 2em
    \large ESCUELA SUPERIOR DE INGENIERÍA INFORMÁTICA
    \vskip 3em
    \textbf{\large GRADO EN INGENIERÍA INFORMÁTICA}
    \vskip 0.5em
    TECNOLOGÍA ESPECÍFICA \\ DE INGENIERIA DEl SOFTWARE
    \vskip 2em
    \large TRABAJO FIN DE GRADO
    \vskip 1em
    {\LARGE \@title \par}
    \vskip 1em
    {\large \@author \par}
    \vfill % Rellena espacio automáticamente hasta ajustar al margen inferior    
    \mbox{\begin{minipage}[b][2.5cm][c]{0.7\linewidth} \fecha \end{minipage}}
    \hfill % Rellena espacio automáticamente hasta que la image se ajuste a la derecha
    \mbox{\epsfig{file=logo-euroinf.eps,width=2.5cm}}   
  \end{center}\par

%  \@thanks
 
  \restoregeometry % Reestablece el tamaño de página definido por geometry
  \end{titlepage}%

  \cleardoublepage

%% Redefino la portada interior del documento
\begin{titlepage}%
  \let\footnotesize\small
  \let\footnoterule\relax
  \let \footnote \thanks
      
  \newgeometry{top=3.5cm,right=2cm} % Adapto el tamaño de esta página únicamente
  
  \begin{center}
    \epsfig{file=logo-conciti.eps,width=3cm}
    \vskip 3em
    \textbf{\large UNIVERSIDAD DE CASTILLA-LA MANCHA}
    \vskip 2em
    \large ESCUELA SUPERIOR DE INGENIERÍA INFORMÁTICA
    \vskip 3em
    \textbf{\large GRADO EN INGENIERÍA INFORMÁTICA}
    \vskip 0.5em
    TECNOLOGÍA ESPECÍFICA DE \\ DE INGENIERIA DEl SOFTWARE
    \vskip 2em
    \large TRABAJO FIN DE GRADO
    \vskip 2em
    {\LARGE \@title \par}%
  \end{center}\par%
  
  \vfill
  {\large
     \lineskip .75em%
      \begin{tabular}[t]{ll}%
        Autor: & \@author\\
        Directores: & \argSuper \\
         & \argCosuper \\
      \end{tabular}\par}%
      \vskip 1em%
    \flushright{\large \fecha \par}%       % Set date in \large size.

%  \@thanks

  \restoregeometry % Reestablece el tamaño de página definido por geometry
  \end{titlepage}%
    \cleardoublepage
  \setcounter{footnote}{0}%
  \global\let\thanks\relax
  \global\let\maketitle\relax
  \global\let\@thanks\@empty
  \global\let\@author\@empty
  \global\let\@date\@empty
  \global\let\@title\@empty
  \global\let\title\relax
  \global\let\author\relax
  \global\let\date\relax
  \global\let\and\relax
}


%
% Definición del entorno autoria
%

\newenvironment{autoria}{%
  \cleardoublepage
%  \vspace*{5em}%
  \thispagestyle{empty}
  \vspace*{1em}%
  \centerline{\fontfamily{phv}\selectfont\Large Declaraci\'on de Autor\'{i}a}
  \vspace*{1em}
}%
{\cleardoublepage}


%
% Definición del entorno resumen
%

\newenvironment{resumen}{%
  \cleardoublepage
%  \vspace*{5em}%
  \thispagestyle{empty}
  \vspace*{1em}%
  \centerline{\fontfamily{phv}\selectfont\Large Resumen}
  \vspace*{1em}
}%
{\cleardoublepage}

%
% Definición del entorno agradecimiento
%

\newenvironment{agradece}{%
  \cleardoublepage
%  \vspace*{5em}%
  \thispagestyle{empty}
  \vspace*{1em}%
  \centerline{\fontfamily{phv}\selectfont\Large Agradecimientos}
  \vspace*{1em}
}%
{\cleardoublepage}

%
% Definición de la cita
%
\newenvironment{dedicatoria}{%
  \cleardoublepage%
  \thispagestyle{empty}%
  \begin{flushright}%
    \em\null\vskip4in
}%
{\vfill
  \end{flushright}
  \cleardoublepage
}%


%
% Redefinición de las cabeceras de los capítulos
%
%\renewcommand{\@makechapterhead}[1]{%
%  {\fontsize{20}{24}\selectfont\scshape\@chapapp\space\MakeUppercase\thechapter.\space#1\par\vskip20\p@}}

% 
% Redefinición de las cabeceras de las secciones
%
\let\seccion\section
\renewcommand{\section}[1]{\seccion{\fontsize{18}{22}{#1}}}

%
% Redefinición de la frontmatter para incluir romanos en minúscula.
%
\renewcommand\frontmatter{%
  \if@openright
    \cleardoublepage
  \else
    \clearpage
  \fi
  \@mainmatterfalse
  \pagenumbering{roman}}


%
% Deja en sin encabezado ni pié de página las páginas en blanco
%
\let\salto\cleardoublepage
\renewcommand{\cleardoublepage}{\newpage{\pagestyle{empty}\salto}}


%
% Generación de índice general
%
\let\indice\tableofcontents
\renewcommand{\tableofcontents}{\setcounter{tocdepth}{1}\indice\cleardoublepage}

%
% Generación de la lista de figuras
%
\let\figuras\listoffigures
\renewcommand{\listoffigures}{\addcontentsline{toc}{chapter}{\listfigurename}\figuras%
\cleardoublepage}

%
% Generación de la lista de tablas
%
\let\tablas\listoftables
\renewcommand{\listoftables}{\addcontentsline{toc}{chapter}{\listtablename}\tablas%
\cleardoublepage}



